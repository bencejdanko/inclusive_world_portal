{% extends "base_portal.html" %}
{% load static %}

{% block page_title %}{{ doc.title }}{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar Navigation -->
    <div class="col-lg-3 mb-4">
      <div class="howto-nav-card sticky-top" style="top: 20px;">
        <div class="howto-nav-header">
          <i class="bi bi-list-ul me-2"></i>
          <strong>All Guides</strong>
        </div>
        <div class="howto-nav-list">
          <a href="{% url 'portal:howto_index' %}" class="howto-nav-item">
            <i class="bi bi-house-door me-2"></i>
            Back to Index
          </a>
          {% for guide in docs %}
            <a href="{% url 'portal:howto_detail' guide.slug %}" 
               class="howto-nav-item {% if guide.slug == current_slug %}active{% endif %}">
              {{ guide.title }}
            </a>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="col-lg-9">
      <div class="card shadow-sm">
        <div class="card-body">
          <!-- Title -->
          <div class="mb-4">
            <h1 class="display-5 mb-3">
              <i class="bi bi-book-half text-primary me-2"></i>
              {{ doc.title }}
            </h1>
            <hr>
          </div>

          <!-- Documentation Content -->
          <div class="howto-content">
            {{ doc.content_html }}
          </div>

          <!-- Navigation Buttons -->
          <hr class="my-4">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              {% if prev_doc %}
                <a href="{% url 'portal:howto_detail' prev_doc.slug %}" class="btn btn-outline-secondary">
                  <i class="bi bi-arrow-left me-1"></i>
                  Previous: {{ prev_doc.title }}
                </a>
              {% endif %}
            </div>
            <div>
              <a href="{% url 'portal:howto_index' %}" class="btn btn-outline-primary">
                <i class="bi bi-grid-3x3-gap me-1"></i>
                All Guides
              </a>
            </div>
            <div>
              {% if next_doc %}
                <a href="{% url 'portal:howto_detail' next_doc.slug %}" class="btn btn-outline-secondary">
                  Next: {{ next_doc.title }}
                  <i class="bi bi-arrow-right ms-1"></i>
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* How To Navigation Card */
  .howto-nav-card {
    background-color: var(--color-card-bg);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-md);
    overflow: hidden;
  }
  
  .howto-nav-header {
    background: var(--color-brand-blue-peacock);
    color: white;
    padding: var(--space-md);
    font-weight: 600;
    font-size: 0.9375rem;
    display: flex;
    align-items: center;
  }
  
  .howto-nav-list {
    display: flex;
    flex-direction: column;
  }
  
  .howto-nav-item {
    padding: var(--space-sm) var(--space-md);
    color: var(--color-foreground);
    text-decoration: none;
    transition: all 0.2s ease;
    font-size: 0.875rem;
    border-left: 3px solid transparent;
    display: block;
  }
  
  .howto-nav-item:hover {
    background: rgba(0, 73, 79, 0.05);
    color: var(--color-brand-blue-peacock);
    border-left-color: var(--color-brand-blue-peacock);
  }
  
  .howto-nav-item.active {
    background: rgba(0, 73, 79, 0.1);
    color: var(--color-brand-blue-peacock);
    border-left-color: var(--color-brand-blue-peacock);
    font-weight: 600;
  }
  
  /* Styling for markdown content using project.css variables */
  .howto-content {
    font-size: 1.05rem;
    line-height: 1.7;
    color: var(--color-foreground);
  }
  
  .howto-content h1 {
    font-size: 2rem;
    margin-top: var(--space-xl);
    margin-bottom: var(--space-md);
    color: var(--color-foreground);
    border-bottom: 2px solid var(--color-brand-berry);
    padding-bottom: var(--space-sm);
    font-weight: 700;
  }
  
  .howto-content h2 {
    font-size: 1.6rem;
    margin-top: var(--space-lg);
    margin-bottom: var(--space-sm);
    color: var(--color-foreground);
    font-weight: 600;
  }
  
  .howto-content h3 {
    font-size: 1.3rem;
    margin-top: var(--space-md);
    margin-bottom: var(--space-sm);
    color: var(--color-foreground);
    font-weight: 600;
  }
  
  .howto-content p {
    margin-bottom: var(--space-md);
  }
  
  .howto-content ul, .howto-content ol {
    margin-bottom: var(--space-md);
    padding-left: 2rem;
  }
  
  .howto-content li {
    margin-bottom: var(--space-sm);
  }
  
  .howto-content code {
    background-color: var(--color-muted);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    font-family: var(--font-mono);
    font-size: 0.9em;
    color: var(--color-brand-berry);
  }
  
  .howto-content pre {
    background-color: var(--color-muted);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-md);
    overflow-x: auto;
    margin-bottom: var(--space-md);
  }
  
  .howto-content pre code {
    background-color: transparent;
    padding: 0;
    color: inherit;
  }
  
  .howto-content blockquote {
    border-left: 4px solid var(--color-brand-splashy-aqua);
    padding-left: var(--space-md);
    margin-left: 0;
    color: var(--color-muted-foreground);
    font-style: italic;
    margin-bottom: var(--space-md);
  }
  
  .howto-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    margin: var(--space-md) 0;
  }
  
  .howto-content table {
    width: 100%;
    margin-bottom: var(--space-md);
    border-collapse: collapse;
  }
  
  .howto-content table th,
  .howto-content table td {
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--color-border);
  }
  
  .howto-content table th {
    background-color: var(--color-muted);
    font-weight: 600;
    color: var(--color-foreground);
  }
  
  .howto-content a {
    color: var(--color-brand-blue-peacock);
    text-decoration: none;
    font-weight: 500;
  }
  
  .howto-content a:hover {
    color: var(--color-dark-blue-peacock);
    text-decoration: underline;
  }
  
  /* Youth-friendly callout boxes using project.css badge colors */
  .howto-content blockquote {
    padding: var(--space-md);
    border-radius: var(--radius-lg);
    margin: var(--space-md) 0;
    background-color: var(--color-badge-light-blue);
    border-left: 4px solid var(--color-badge-dark-blue);
    color: var(--color-badge-dark-blue);
  }
  
  .howto-content blockquote strong:first-child {
    display: block;
    margin-bottom: var(--space-xs);
    font-weight: 700;
  }
</style>
{% endblock %}
