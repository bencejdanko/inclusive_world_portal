apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: inclusive-world-portal

resources:
  # Namespace
  - namespace.yaml
  
  # Configuration
  - configmap.yaml
  # Note: secrets.yaml should be created manually or with external-secrets
  
  # PostgreSQL
  - postgres/statefulset.yaml
  - postgres/service.yaml
  
  # Redis
  - redis/deployment.yaml
  - redis/service.yaml
  - redis/pvc.yaml
  
  # MinIO
  - minio/statefulset.yaml
  - minio/service.yaml
  - minio/init-job.yaml
  
  # Django
  - django/deployment.yaml
  - django/service.yaml
  - django/pvc.yaml
  - django/hpa.yaml
  
  # Celery
  - celery/worker-deployment.yaml
  - celery/beat-deployment.yaml
  - celery/pvc.yaml
  - celery/worker-hpa.yaml
  
  # Nginx
  - nginx/configmap.yaml
  - nginx/deployment.yaml
  - nginx/service.yaml
  - nginx/ingress.yaml

commonLabels:
  app.kubernetes.io/name: inclusive-world-portal
  app.kubernetes.io/managed-by: argocd

images:
  - name: your-registry/inclusive-world-portal
    newName: your-registry/inclusive-world-portal
    newTag: latest
